<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ARMA3 Replay Stats Total</title>
  <style>
    .small {
        font-size: 8;
      }
    .hide {
        display: none;
      }
    .btn_small {
        padding: 0.1;
        font-size: 0.8rem;
        border-radius: 0.25rem;
      }
    .link {
      color: blue;
      text-decoration: underline;
      cursor: pointer;
    }
    .link:hover {
      color: red;
    }
    .header {
      color: red;
    }
    .tooltip-inner {
    white-space: pre-wrap;
    }
  </style>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.23/js/dataTables.bootstrap4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.23/css/dataTables.bootstrap4.min.css">

</head>

<body>

<!-- Loading Modal -->
<div class="modal fade show" id="loadingModal" tabindex="-1" role="dialog" aria-labelledby="loadingModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="loadingModalLabel">{{ loading_message }}</h5>
      </div>
      <div class="modal-body text-center">
        <div class="spinner-border text-primary" role="status">
          <span class="sr-only">Loading...</span>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Fog the page when the modal is shown -->
<div id="loadingFog" class="modal-backdrop fade show" style="display: none;"></div>


<div class="container mt-2">
  <a href="/"><h1>ARMA3 RBC OCAP Based Replay Statistic</h1></a>
  <h5>маид бай STELS</h5>
  <h5>TVT and TVT2 total statistic, starting 01.01.2021</h5>
  {% if error_message != '' %}
  <h3>{{ error_message }}</h3>
  {% endif %}
</div>

{% if error_message == '' %}
<div class="container mt-3">
  <h3>Kiberkotlets statistic</h3>
  <table id="frag-stats-table" class="table table-striped table-bordered stats-table table-hover table-sm">
    <thead class="thead-dark">
      <tr>
        <th>Player</th>
        <th>Frags</th>
        <th>Missions</th>
        <th>Kills/Missions</th>
        <th>Kills/Deaths</th>
      </tr>
    </thead>
    <tbody>
        {% for player, stats in frag_stats.items() %}
        <tr>
          <td>{{ player }}</td>
          <td>{{ stats['kills'] }}</td>
          <td>{{ stats['missions'] }}</td>
          <td>{{ stats['k_m'] }}</td>
          <td>{{ stats['k_d'] }}</td>
        </tr>
        {% endfor %}
      </tbody>
  </table>
</div>

<div class="container mt-3">
  <h3>Kiber Squads statistic</h3>
  <table id="team-frag-stats-table" class="table table-striped table-bordered stats-table table-hover table-sm">
    <thead class="thead-dark">
      <tr>
        <th>Squad</th>
        <th>Frags</th>
        <th>Missions</th>
        <th>Kills/Missions</th>
      </tr>
    </thead>
    <tbody>
        {% for team, stats in team_frag_stats.items() %}
        <tr>
          <td>{{ team }}</td>
          <td>{{ stats['kills'] }}</td>
          <td>{{ stats['missions'] }}</td>
          <td>{{ stats['k_m'] }}</td>
        </tr>
        {% endfor %}
      </tbody>
  </table>
</div>

<div class="container mt-3">
  <h3>Players Teamkill statistic</h3>
  <table id="tk-stats-table" class="table table-striped table-bordered stats-table table-hover table-sm">
    <thead class="thead-dark">
      <tr>
        <th>Player</th>
        <th>Teamkills</th>
        <th>Missions</th>
        <th>Kills/Missions</th>
      </tr>
    </thead>
    <tbody>
        {% for player, stats in tk_stats.items() %}
        <tr>
          <td>{{ player }}</td>
          <td>{{ stats['kills'] }}</td>
          <td>{{ stats['missions'] }}</td>
          <td>{{ stats['k_m'] }}</td>
        </tr>
        {% endfor %}
      </tbody>
  </table>
</div>

<div class="container mt-3">
  <h3>Squads Teamkill statistic</h3>
  <table id="team-tk-stats-table" class="table table-striped table-bordered stats-table table-hover table-sm">
    <thead class="thead-dark">
      <tr>
        <th>Squad</th>
        <th>Teamkills</th>
        <th>Missions</th>
        <th>Kills/Missions</th>
      </tr>
    </thead>
    <tbody>
        {% for team, stats in team_tk_stats.items() %}
        <tr>
          <td>{{ team }}</td>
          <td>{{ stats['kills'] }}</td>
          <td>{{ stats['missions'] }}</td>
          <td>{{ stats['k_m'] }}</td>
        </tr>
        {% endfor %}
      </tbody>
  </table>
</div>
{% endif %}

<div class="container mt-3">
  <p>Олл райтс резёрвед, копирайт @ 2023</p>
</div>

<script>
  $(document).ready(function() {
    $('.stats-table').DataTable({
      "paging": true,
      "lengthChange": true,
      "searching": true,
      "ordering": true,
      "info": true,
      "autoWidth": false,
      "order": [[ 1, "desc" ]]
    });
  });
</script>

</body>
</html>